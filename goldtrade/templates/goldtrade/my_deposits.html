{% extends 'base.html' %}
{% load humanize %}

{% block title %}My Deposits - Hifas Jewellery{% endblock %}
{% block content %}
<h3 class="text-light fw-bold mb-3">ðŸ’µ My Deposit Requests</h3>

<div class="mb-3">
  <a class="btn btn-sm btn-warning" href="{% url 'add_money' %}">+ New Deposit</a>
</div>

<div class="card" style="background:#10192c;border:1px solid #d4af37;">
  <div class="table-responsive">
    <table class="table table-dark table-striped mb-0">
      <thead>
        <tr>
          <th>Date</th>
          <th>Amount (LKR)</th>
          <th>Reference</th>
          <th>Slip</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
      {% for d in deposits %}
        <tr>
          <td>{{ d.created_at|date:"Y-m-d H:i" }}</td>
          <td>Rs. {{ d.amount|floatformat:2|intcomma }}</td>
          <td>{{ d.reference_no }}</td>
          <td>
            {% if d.slip %}
              <a href="{{ d.slip.url }}" target="_blank" class="btn btn-sm btn-outline-warning">View</a>
            {% else %}-{% endif %}
          </td>
          <td>
            {% if d.status == "pending" %}
              <span class="badge bg-warning text-dark">Pending</span>
            {% elif d.status == "approved" %}
              <span class="badge bg-success">Approved</span>
            {% else %}
              <span class="badge bg-danger">Rejected</span>
            {% endif %}
          </td>
        </tr>
      {% empty %}
        <tr><td colspan="5" class="text-center text-secondary p-4">No deposits yet.</td></tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
